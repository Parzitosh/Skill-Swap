<%- include('partials/header', { title: 'Dashboard' }) %>

<nav>
    <ul>
        <li><strong>SkillSwap</strong></li>
    </ul>
    <ul>
        <li><a href="/users/dashboard" class="secondary">Dashboard</a></li>
        <li><a href="/users/profile" class="secondary">My Profile</a></li>
        <li><a href="/users/requests" class="secondary">My Requests</a></li>
        <li><a href="/users/logout" role="button">Logout</a></li>
    </ul>
</nav>

<h1>User Dashboard</h1>
<p>Find other users to swap skills with!</p>

<form action="/users/dashboard" method="GET">
    <div class="grid">
        <input type="search" id="search" name="search" placeholder="Search by skill (e.g., Python)" value="<%= searchQuery %>">
        <button type="submit">Search</button>
    </div>
</form>
<hr>

<% if (users && users.length > 0) { %>
    <% users.forEach(user => { %>
        <article>
            <header>
                <strong><%= user.name %></strong>
            </header>
            <p>
                <strong>Offers:</strong> 
                <%= user.skillsOffered.join(', ') || 'None' %>
            </p>
            <p>
                <strong>Needs:</strong> 
                <%= user.skillsNeeded.join(', ') || 'None' %>
            </p>
            <footer>
                <form action="/users/request/<%= user._id %>" method="POST">
                    <button type="submit">Send Swap Request</button>
                </form>
            </footer>
        </article>
    <% }) %>
<% } else { %>
    <p>No other users have registered yet.</p>
<% } %>

<%- include('partials/footer') %>